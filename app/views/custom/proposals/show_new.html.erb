<%= content_for :body_class, "proposals-show" %>
<% preview = false unless local_assigns.has_key? :preview %>
<% provide :title do %><%= @proposal.title %><% end %>
<% content_for :meta_description do %>
  <%= strip_tags(@proposal.description)[0..200] %>
<% end %>
<% provide :social_media_meta_tags do %>
  <%= render "shared/social_media_meta_tags",
    social_url: proposal_url(@proposal),
    social_title: @proposal.title,
    social_description: strip_tags(@proposal.description)[0..200],
    twitter_image_url: (@proposal.image.present? ? polymorphic_path(@proposal.image) : nil),
    og_image_url: (@proposal.image.present? ? polymorphic_path(@proposal.image) : nil) %>
<% end %>
<% content_for :canonical do %>
  <%= render "shared/canonical", href: proposal_url(@proposal) %>
<% end %>

<% if projekt_feature?(@proposal.projekt_phase.projekt, "general.vc_map_enabled") %>
  <% provide :vc_maps do %>
    <script id="vcmap-core" type="module" src="/vcmap/vcmap-core.js"></script>
  <% end %>
<% end %>


<%= render "proposals/show_content", proposal: @proposal, preview: preview, comment_tree: @comment_tree %>
